"0","# define a polygon of the area of interest to the southeast of Gough Island as a dataframe"
"0","aoi_poly <- data.frame("
"0","  id = 'aoi',"
"0","  x = c(-18, 12, 12, -18, -18),"
"0","  y = c(-40, -40, -46, -46, -40)"
"0",")"
"0",""
"0","# set the bounding area for the map"
"0","bounding_1 <- fishwatchr::transform_box(xlim = c(-62, 25), "
"0","                                        ylim = c(-25, -46),"
"0","                                        output_crs = ""+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"")"
"0",""
"0","# make map with ggplot2"
"0","ll_ns_gridded %>% "
"0","  # only include data south of -25Â°, where night setting is required"
"0","  filter(lat_bin < -25) %>% "
"0","ggplot() +"
"0","  geom_raster(aes(x = lon_bin,"
"0","                  y = lat_bin,"
"0","                  fill = ratio_ns)) +"
"0","  fishwatchr::geom_gfw_eez(lwd = 1) +"
"0","  fishwatchr::geom_gfw_land() +"
"0","  geom_sf(data = tdc_sf, fill = gfw_palette(""map_country_dark"")[1]) +"
"0","  geom_path(data = aoi_poly, aes(x = x, y = y, group = id), colour = ""white"") +"
"0","  labs(title = ""Ratio of night to day setting in South Atlantic"","
"0","       subtitle = ""Jan. 1, 2019 to June 30, 2021"","
"0","       x = ""lon"","
"0","       y = ""lat"") +"
"0","  scale_fill_gradientn(colours = c(gfw_palette(""orange"")[1], wes_palette(""Darjeeling1"")[5]),"
"0","                       limits = c(0,1),"
"0","                       oob = scales::squish,"
"0","                       na.value = NA,"
"0","                       name = NULL,"
"0","                       breaks = c(0,1),"
"0","                       labels = c(""All day sets"", ""All night sets"")) +"
"0","  theme_gfw_map_cian() +"
"0","  theme(plot.title = element_text(size = 20),"
"0","        plot.subtitle = element_text(size = 16),"
"0","        axis.title = element_blank(),"
"0","        axis.text = element_text(size = 16),"
"0","        legend.text = element_text(size = 16)) +"
"0","  coord_sf(xlim = c(bounding_1$box_out[['xmin']], bounding_1$box_out[['xmax']]), "
"0","           ylim = c(bounding_1$box_out[['ymin']], bounding_1$box_out[['ymax']]), "
"0","           crs = bounding_1$out_crs)"
