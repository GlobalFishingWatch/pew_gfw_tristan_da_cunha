"0","# regrid the data to highlight the most active flag at each location"
"0","ll_ns_gridded_2 <- ll_ns %>% "
"0","  dplyr::select(best_flag, start_lon, set_id, start_lat, end_lon, end_lat, start_time) %>%"
"0","  rowwise() %>%"
"0","  mutate(mean_lon = mean(c(start_lon, end_lon), na.rm = TRUE), # average longitude and latitude between start and end locations"
"0","         mean_lat = mean(c(start_lat, end_lat), na.rm = TRUE),"
"0","         lon_bin = floor(mean_lon*10)/10, # set the grid resolution to one 10th of a degree"
"0","         lat_bin = floor(mean_lat*10)/10,"
"0","         date = lubridate::date(start_time) # use the start time to assign a date to each set"
"0","         ) %>% "
"0","  group_by(lat_bin, lon_bin) %>% "
"0","  # filter to keep only the most prominent flag at each location"
"0","  filter(best_flag == max(best_flag)) %>% "
"0","  mutate(flag_2 = if_else(best_flag %in% c(""JPN"", ""KOR""), best_flag, ""other""))"
