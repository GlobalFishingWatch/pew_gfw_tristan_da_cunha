"0","# create a dataframe of the coordinates of where the MS Oliva ran aground"
"0","ms_oliva <- data.frame(name = ""MV Oliva"","
"0","                       lon = -12.493,"
"0","                       lat = -37.419)"
"0",""
"0","# This code sets a bounding box for the map area"
"0","bounding_atba <- transform_box(xlim = c(-13.3, -9), "
"0","                               ylim = c(-41, -36),"
"0","                               output_crs = ""+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"")"
"0",""
"0","# use ggplot2 to create a map of transits"
"0","vt_transits %>% "
"0","  # filter data to only include transits after the ATBA was established"
"0","  filter(date >= ymd(""2020-04-01""),"
"0","         through_atba == TRUE,"
"0","         slowed_in_atba == FALSE,"
"0","         # exclude sailing vessels"
"0","         !ssvid %in% sailing_vessels$ssvid) %>% "
"0","  group_by(as.factor(transit_id_eez)) %>% "
"0","  arrange(timestamp) %>% "
"0","  ggplot() +"
"0","  geom_path(aes(x = lon, y = lat, group = transit_id_eez), colour = gfw_palette(""map_presence_dark"")[3], alpha = 0.3) +"
"0","  geom_sf(data = atba_sf, colour = ""white"", linetype = 1, fill = NA) +"
"0","  geom_sf(data = tdc_sf, fill = gfw_palette(""map_country_dark"")[1]) +"
"0","  geom_point(data = ms_oliva, aes(x = lon, y = lat), shape = 18, colour = gfw_palette(""sand"")[1]) +"
"0","  annotate(""text"", x = -12.2, y = -37.3, colour = gfw_palette(""sand"")[1], label = ""MS Oliva"") +"
"0","  labs(title = ""Vessel transits through Tristan da Cunha ATBA"","
"0","       subtitle = ""April 1, 2020 to June 30, 2021"") +"
"0","  theme_gfw_map_cian() +"
"0","  theme(plot.title = element_text(size = 16),"
"0","        plot.subtitle = element_text(size = 14),"
"0","        axis.text = element_text(size = 12),"
"0","        legend.title = element_text(size = 14),"
"0","        legend.text = element_text(size = 12),"
"0","        legend.position = c(0.7, 0.95)) +"
"0","  coord_sf(xlim = c(bounding_atba$box_out[['xmin']], bounding_atba$box_out[['xmax']]), "
"0","           ylim = c(bounding_atba$box_out[['ymin']], bounding_atba$box_out[['ymax']]), "
"0","           crs = bounding_atba$out_crs)"
