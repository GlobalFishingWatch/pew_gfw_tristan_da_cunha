"0","# create a summary table of the top 10 flags that caught the most blue shark"
"0","# useful for plotting"
"0","bsh_top_flags <- bsh_catch %>%"
"0","  filter(!is.na(flag),"
"0","         year %>% between(2016, 2020)) %>% "
"0","  group_by(flag) %>% "
"0","  summarise(catch = sum(catch, na.rm=TRUE)) %>% "
"0","  arrange(desc(catch)) %>% "
"0","  top_n(10)"
"1","Selecting by catch
"
"0","# create a barplot of total blue shark catch per year per flag"
"0","bsh_catch %>% "
"0","  mutate(flag = flag %>% factor(levels = bsh_top_flags$flag)) %>% "
"0","  filter(!is.na(flag),"
"0","         year %>% between(2016, 2020)) %>% "
"0","  ggplot() +"
"0","    geom_col(aes(x = flag, y = catch), fill = gfw_palette(""chart"")[1]) +"
"0","    scale_x_discrete(labels = c(""ESP"", ""PRT"", ""BRA"", ""JPN"", ""NAM"", ""TPE"", ""ZAF"", ""CIV"", ""KOR"", ""BLZ"")) +"
"0","    labs(x = ""Flag"","
"0","         y = ""BSH catch (tonnes)"","
"0","         title = ""Blue shark (BSH) catch in the South Atlantic\nreported to ICCAT"","
"0","         subtitle = ""2016 - 2020"") + "
"0","  theme_gfw_cian() +"
"0","  theme(axis.title = element_text(size = 16),"
"0","        axis.text = element_text(size = 14),"
"0","        plot.title = element_text(size = 16),"
"0","        plot.subtitle = element_text(size = 14),"
"0","        legend.title = element_text(size = 14),"
"0","        legend.text = element_text(size = 12),"
"0","        strip.text = element_text(size = 16),"
"0","        legend.position = ""bottom"")"
