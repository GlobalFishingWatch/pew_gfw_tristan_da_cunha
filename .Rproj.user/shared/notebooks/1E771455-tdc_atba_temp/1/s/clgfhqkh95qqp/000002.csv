"0","# create long version of dataframe"
"0","# filter to only include ports of origin"
"0","# create a col called cat (short for category) and populate with ""origin"""
"0","ports_origin <- transit_ports %>% "
"0","  filter(!is.na(trip_start_anchorage_label)) %>% "
"0","  mutate(port_label = str_c(trip_start_anchorage_label, trip_start_anchorage_country, sep = "", "")) %>%  "
"0","  group_by(port_label) %>% "
"0","  summarise(n_voyages = n(),"
"0","            lon = mean(trip_start_anchorage_lon, na.rm = TRUE),"
"0","            lat = mean(trip_start_anchorage_lat, na.rm = TRUE)) %>% "
"0","  mutate(cat = ""origin"")"
"0",""
"0","# note there are 6 fewer destinations as 6 trips were still active at the end of our time range"
"0","# and hadn't yet reached a port"
"0",""
"0","# filter to only include ports of origin"
"0","# create a col called cat (short for category) and populate with ""origin"""
"0","ports_destination <- transit_ports %>% "
"0","  filter(!is.na(trip_end_anchorage_label)) %>% "
"0","  mutate(port_label = str_c(trip_end_anchorage_label, trip_end_anchorage_country, sep = "", "")) %>%  "
"0","  group_by(port_label) %>% "
"0","  summarise(n_voyages = n(),"
"0","            lon = mean(trip_end_anchorage_lon, na.rm = TRUE),"
"0","            lat = mean(trip_end_anchorage_lat, na.rm = TRUE)) %>% "
"0","  mutate(cat = ""destination"")"
"0",""
"0","# bind the two dataframes together"
"0","ports_long <- rbind(ports_origin, ports_destination)"
