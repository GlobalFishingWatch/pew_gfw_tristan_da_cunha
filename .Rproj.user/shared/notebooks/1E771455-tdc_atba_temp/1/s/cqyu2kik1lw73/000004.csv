"0","# filter out trips that cross 180 longitude"
"0","# these are difficult to map"
"0","trip_sum <- squid_tracks_2 %>%"
"0","  group_by(trip_id) %>%"
"0","  summarise(keep = min(lon) > -120) %>%"
"0","  filter(keep == TRUE)"
"0",""
"0","# set the bounding area for the map"
"0","bounding_3 <- transform_box(xlim = c(-120, 180), "
"0","                            ylim = c(-55, 50),"
"0","                            output_crs = ""+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"")"
"0",""
"0","# use ggplot to create the map"
"0","squid_tracks_2 %>% "
"0","  filter(trip_id %in% trip_sum$trip_id) %>%"
"0","  arrange(timestamp) %>%"
"0","  ggplot() +"
"0","    geom_path(aes(x = lon, y = lat, group = trip_id), colour = gfw_palette(""tracks"")[1], alpha = 0.2) +"
"0","    # geom_gfw_eez(lwd = 1) + "
"0","    geom_sf(data = eez_tdc, fill = NA, colour = ""white"", size = 1) +"
"0","    geom_gfw_land() +"
"0","    geom_sf(data = atba_sf, colour = ""red"", linetype = 1, fill = NA) +"
"0","    geom_sf(data = tdc_sf, fill = gfw_palette(""map_country_dark"")[1]) +"
"0","    geom_point(data = squid_tracks_2 %>% filter(fishing_hours > 0), "
"0","               aes(x = lon, y = lat), "
"0","               colour = gfw_palette(""yellow"")[1], size = 1, alpha = 0.2) +"
"0","    labs(title = ""Squid jigger fishing vessels transiting through ATBA"","
"0","         subtitle = ""1 Jan. 2019 - 30 June 2021"") +"
"0","    theme_gfw_map_cian() +"
"0","    theme(plot.title = element_text(size = 20),"
"0","          plot.subtitle = element_text(size = 16),"
"0","          axis.text = element_text(size = 16),"
"0","          legend.title = element_text(size = 20),"
"0","          legend.text = element_text(size = 16)) +"
"0","    coord_sf(xlim = c(bounding_3$box_out[['xmin']], bounding_3$box_out[['xmax']]), "
"0","             ylim = c(bounding_3$box_out[['ymin']], bounding_3$box_out[['ymax']]), "
"0","             crs = bounding_3$out_crs)"
